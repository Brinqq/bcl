\doxysection{pool.\+h}
\hypertarget{pool_8h_source}{}\label{pool_8h_source}\index{/Users/brinq/.dev/projects/bcl/src/include/bl/containers/pool.h@{/Users/brinq/.dev/projects/bcl/src/include/bl/containers/pool.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}bl/containers/vector.h"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}bl/containers/freelist.h"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}bl/features.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }bcl\{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{comment}{//if\ resource\ is\ not\ copyable,\ pool\ will\ rely\ heavly\ on\ the\ resources\ default\ constructer\ as\ the\ default\ state\ of\ the\ free\ resources.}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ \_Type,\ uint32\_t\ \_Size,\ \textcolor{keyword}{typename}\ ...\ \_Args>}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }pool\{}
\DoxyCodeLine{00014\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \textcolor{comment}{//\ static\ constexpr\ \ bool\ \_freelist\_inline\ =\ (\_Size\ *\ sizeof(\_freelist\_type::storage\_type))\ <\ 64\ -\/\ sizeof(bcl::fixed\_vector<\_Type,\ \_Size>);}}
\DoxyCodeLine{00017\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structbcl_1_1__freelist__traits}{\_freelist\_traits}}\ \_freelist\_con\{.fixed\ =\ \textcolor{keyword}{true},\ .force\_heap\ =\ \textcolor{keyword}{false}\};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classbcl_1_1fixed__vector}{bcl::fixed\_vector<\_Type,\ \_Size>}}\ \_container\_t;}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classbcl_1_1freelist}{bcl::freelist<\_Size,\ \_freelist\_traits::\_bitvector,\ \_freelist\_con>}}\ \_freelist\_t;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \_container\_t\ \_container;}
\DoxyCodeLine{00023\ \ \ \_freelist\_t\ \_freelist;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \textcolor{keyword}{typedef}\ \_Type\ value\_type;}
\DoxyCodeLine{00027\ \ \ \textcolor{keyword}{typedef}\ \_Type*\ handle;}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \_BCLCONSTEXPR20\ \textcolor{keywordtype}{bool}\ full()\{\textcolor{keywordflow}{return}\ \_freelist.full();\}}
\DoxyCodeLine{00030\ \ \ \_BCLCONSTEXPR20\ \textcolor{keywordtype}{bool}\ empty()\{\textcolor{keywordflow}{return}\ \_freelist.empty();\}}
\DoxyCodeLine{00031\ \ \ \_BCLCONSTEXPR20\ \textcolor{keywordtype}{bool}\ valid\_handle(handle\ h)\{\textcolor{keywordflow}{return}\ h\ !=\ \textcolor{keyword}{nullptr};\}}
\DoxyCodeLine{00032\ \ \ \_BCLCONSTEXPR20\ \textcolor{keywordtype}{size\_t}\ max\_size()\{\textcolor{keywordflow}{return}\ \_Size;\}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \_BCLCONSTEXPR20\ handle\ allocate()\{}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \ index\ =\ \_freelist.get();}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{if}(index\ ==\ 0)\{\textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{return}\ \&\_container[index\ -\/1];}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \_BCLCONSTEXPR20\ \textcolor{keywordtype}{void}\ release(handle*\ h)\{}
\DoxyCodeLine{00041\ \ \ \ \_freelist.push(*h\ -\/\ \_container.begin());}
\DoxyCodeLine{00042\ \ \ \ \textcolor{comment}{//deconstruct\ object}}
\DoxyCodeLine{00043\ \ \ \ \textcolor{comment}{//reconsturct\ object}}
\DoxyCodeLine{00044\ \ \ \ *h\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00045\ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \textcolor{comment}{//\ \_BCLCONSTEXPR20\ size\_t\ size()\{\}}}
\DoxyCodeLine{00048\ \ \textcolor{comment}{//\ \_BCLCONSTEXPR20\ uint32\_t\ available()\{\}}}
\DoxyCodeLine{00049\ \ }
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \textcolor{comment}{//\ \_BCLCONSTEXPR20\ void\ clear()\{\}}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \textcolor{comment}{//constructors}}
\DoxyCodeLine{00054\ \ \ \_BCLCONSTEXPR20\ pool():\_container(\_Size)\{}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \_BCLCONSTEXPR20\ pool(pool\&\&\ other)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00059\ \ \ \_BCLCONSTEXPR20\ pool(\textcolor{keyword}{const}\ pool\&\ other)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{comment}{//TODO:}}
\DoxyCodeLine{00063\ \ \ \textcolor{comment}{//\ make\ a\ make\_pool\ templated\ version\ for\ taking\ in\ (\_Args...)\ returns\ a\ pool\&\&\ with\ its\ default}}
\DoxyCodeLine{00064\ \ \ \textcolor{comment}{//\ object\ state\ constructed\ for\ the\ templated\ \_Args\ ....}}
\DoxyCodeLine{00065\ \ }
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \};\ \textcolor{comment}{//pool}}
\DoxyCodeLine{00068\ \}\ \textcolor{comment}{//bcl}}
\DoxyCodeLine{00069\ }

\end{DoxyCode}
